/**
 * GroupInputs v. 0.7.4
 * @author Pavel Kornilov <pk@ostrovok.ru> <lusever@lusever.com>
 * https://github.com/lusever/groupinputs
 * MIT Licensed
 */
(function(m){function e(h,e,a){var j;if(void 0!==e)h.setSelectionRange?h.setSelectionRange(e,a):document.selection&&document.selection.createRange&&(j=h.createTextRange(),j.collapse(!0),j.moveEnd("character",a),j.moveStart("character",e),j.select());else{a=e=0;if("selectionStart"in h)e=h.selectionStart,a=h.selectionEnd;else if(h.createTextRange){j=document.selection.createRange();var l=j.duplicate();j.parentElement()===h&&(e=-l.moveStart("character",-1E5),a=e+j.text.length)}return{start:e,end:a}}}
m.fn.groupinputs=function(){function h(k,b){var f=k[0].value,c=e(k[0]).end,d=f.slice(0,c),g=f.slice(c),h=b.maxlength-g.length,l=!1,i;for(i=a.length-1;i>b.index;i--)h+=j[i]-a[i].value.length;d.length>h&&(d=d.slice(0,h),c=h);if(f.length>b.maxlength){k[0].value=(d+g).slice(0,b.maxlength);c<=b.maxlength&&(e(k[0],c,c),l=!0);f=(d+g).slice(b.maxlength);if(f.length){for(c-=Math.min(b.maxlength,d.length);a[++i];){d=j[i];f+=a[i].value;a.eq(i).val(f.slice(0,d));if(f.length<=d)break;g=a[i].value.length;l||(c<
d&&(l=!0,a.eq(i).focus(),e(a[i],c,c)),c-=g);f=f.slice(d)}a.eq(i).change()}l||(a.eq(i).focus(),e(a[i],c,c))}}function n(k){var b=k.type,f=k.data,c=k.data.elem,d=f.index,g;m.browser.opera&&("keypress"===b&&(b="keydown"),"input"===b&&(b+=".opera"));switch(k.keyCode){case 8:b+=".backspace";break;case 37:b+=".left";break;case 39:b+=".right";break;case 46:b+=".delete"}switch(b){case "keydown.right":g=e(c[0]);g.start===this.value.length&&d!==a.length-1&&(a.eq(d+1).focus(),e(a[d+1],0,0),k.preventDefault());
break;case "keydown.backspace":case "keydown.left":g=e(c[0]);g.start===g.end&&(0===g.start&&0!==d)&&(d=a.eq(d-1),g=d.val().length,d.focus(),e(d[0],g,g),"keydown.left"===b&&k.preventDefault());break;case "keyup":case "keydown":if(48>k.keyCode)break;g=e(c[0]);g.start===g.end&&(g.start===this.value.length&&d!==a.length-1&&this.value.length===f.maxlength)&&(a.eq(d+1).focus(),e(a[d+1],0,0));break;case "paste":c.attr("maxlength",l);break;case "propertychange":case "input":c.attr("maxlength")!==f.maxlength&&
setTimeout(function(){h(c,f);c.attr("maxlength",f.maxlength)},0);break;case "input.opera":h(c,f)}}if(/iPad|iPhone/.test(navigator.platform))return this;var a=this,j=[],l=0;a.each(function(e){var b=a.eq(e),f=+b.attr("maxlength");l+=f;j.push(f);b.on("keydown keypress keyup input paste propertychange",{elem:b,index:e,maxlengtÂ­h:f},n)});m.browser.opera&&a.attr("maxlength",l);return this}})(jQuery);